name: Create Issue on Push

on:
  push:
    branches: [main] # Replace with the branch you want to trigger the workflow on

jobs:
  create_issue:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Create issue
        uses: peter-evans/create-issue@v3
        with:
          title: New Push to Main Branch
          body: |
            A new push has been made to the main branch.

            Commit SHA: ${{ github.sha }}

            Commit message: ${{ github.event.head_commit.message }}

            Pusher: ${{ github.event.pusher.name }}

            Repository: ${{ github.repository }}

            "The 'generate' job failed. See details at: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}'

            View the [workflow run](${{ github.event.repository.html_url }}/actions/runs/${{ github.run_number }}) for more information.

          labels: auto-generated, push
          assignees: ${{ github.actor }}
